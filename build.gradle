buildscript {
    repositories {
        mavenCentral()
    }
}

plugins {
    id 'com.ullink.msbuild' version '2.15'
    id 'com.ullink.nuget' version '2.12'
}

nuget {
    version = '3.3.0'
}

subprojects {
    apply plugin: 'msbuild'
    apply plugin: 'nuget'
    msbuild.mustRunAfter parent.nugetRestore
}

nugetRestore {
    solutionDirectory = ''
    packagesDirectory = 'packages'
}

project(':ui-tests').msbuild.dependsOn project(':allure').msbuild

task build() {
    dependsOn 'nugetRestore'
    dependsOn subprojects.msbuild
}